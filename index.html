<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Promo Code Claim Demo (Example)</title>
<style>
  body{font-family: system-ui, -apple-system, "Segoe UI", Roboto, Arial; background:#f6f8fb; color:#111; padding:24px;}
  .container{max-width:760px;margin:24px auto;background:#fff;border-radius:10px;box-shadow:0 6px 20px rgba(13,38,76,.08);padding:24px;}
  h1{margin:0 0 8px;font-size:1.4rem}
  p.lead{color:#445;font-size:.95rem}
  label{display:block;margin-top:12px;font-weight:600;font-size:.9rem}
  input[type=text],input[type=email],input[type=tel],select,input[type=date],input[type=time],input[type=number]{
    width:100%;padding:10px;border:1px solid #d7dbe6;border-radius:6px;margin-top:6px;box-sizing:border-box
  }
  .row{display:flex;gap:12px}.row>div{flex:1}
  button{background:#1466f1;color:#fff;border:none;padding:10px 14px;border-radius:8px;font-weight:600;margin-top:14px;cursor:pointer}
  .note{font-size:.85rem;color:#556;margin-top:8px}
  .success{background:#e6fff0;border:1px solid #c6f1d6;padding:12px;border-radius:8px;margin-top:12px;color:#0a662f}
  footer{font-size:.8rem;color:#667;margin-top:18px}
  .small{font-size:.85rem;color:#556;margin-top:6px}
  .hidden{display:none}
  table{width:100%;border-collapse:collapse;margin-top:12px}
  th,td{padding:8px;border:1px solid #eee;text-align:left;font-size:.9rem}

  /* Modal */
  .modal-backdrop{position:fixed;inset:0;background:rgba(0,0,0,.45);display:none;align-items:center;justify-content:center;z-index:1000}
  .modal{background:#fff;border-radius:10px;box-shadow:0 10px 30px rgba(0,0,0,.2);width:min(560px,92vw);padding:18px}
  .modal h3{margin:0 0 6px;font-size:1.05rem}
  .modal-actions{display:flex;gap:10px;justify-content:flex-end;margin-top:12px}
  .btn-secondary{background:#e7ebf3;color:#223}
  .danger-text{color:#c62828;font-weight:700}
  .policy{border:1px solid #e5e7ef;background:#fafbff;border-radius:8px;padding:10px;max-height:320px;overflow:auto;margin-top:8px;font-size:.9rem;line-height:1.55;color:#333}

  /* Info card */
  .card{background:#fff4f4;border:1px solid #ffd4d4;border-radius:10px;padding:12px;margin-top:12px}
  .card h4{margin:0 0 8px}
  .kv{display:grid;grid-template-columns:120px 1fr;gap:8px 10px;font-size:.95rem}

  /* Field hints */
  .hint{font-size:.8rem;color:#6b7280;margin-top:4px}
  .hint b{color:#374151;font-weight:600}
  .hint .nocopy{font-style:italic;opacity:.85}
</style>
</head>
<body>
<div class="container">
  <h1>Claim Flight Promo Code</h1>
  <p class="lead">
    ‚ú®‚úàÔ∏è Super Hot Flight Ticket Deal! ‚úàÔ∏è‚ú®<br>
    <span style="color:#c62828;font-weight:bold;">Only this week</span> ‚Äî grab it before it‚Äôs gone! üéâ<br>
    Get your promo code now and enjoy savings for the 
    <span style="color:#1466f1;font-weight:bold;">next 6 months</span>ÔºÅÔºÅ üõ´üíô
  </p>

  <form id="promoForm" onsubmit="return false;">

    <label>From
      <input required id="from" type="text" placeholder="City (IATA)" autocomplete="off" inputmode="text">
      <div class="hint" id="hint-from">
        Example only ‚Äî <span class="nocopy">do not copy</span>: <b id="hint-from-ex"></b>
      </div>
    </label>

    <label>To
      <input required id="to" type="text" placeholder="City (IATA)" autocomplete="off" inputmode="text">
      <div class="hint" id="hint-to">
        Example only ‚Äî <span class="nocopy">do not copy</span>: <b id="hint-to-ex"></b>
      </div>
    </label>

    <div class="row">
      <div>
        <label>Departure Date
          <input required id="date" type="date" max="2026-12-31" autocomplete="off">
          <div class="hint">Pick a real date you plan to travel (‚â§ <b>2026-12-31</b>).</div>
        </label>
      </div>
      <div>
        <label>Departure Time
          <input required id="time" type="time" autocomplete="off">
          <div class="hint">Local time of departure (24-hour format).</div>
        </label>
      </div>
      <div>
        <label>Flight No. (optional)
          <input id="flight" type="text" placeholder="e.g., QF400" autocomplete="off" inputmode="latin" pattern="[A-Za-z]{1,2}\\s?\\d{2,4}">
          <div class="hint">Format: <b>AA1234</b> or <b>AA 1234</b> (optional).</div>
        </label>
      </div>
    </div>

    <div class="row">
      <div>
        <label>Full Name
          <input required id="name" type="text" placeholder="Your full name" autocomplete="off">
          <div class="hint">Enter your real name as it appears on your ID.</div>
        </label>
      </div>
      <div>
        <label>Gender
          <input id="gender" type="text" placeholder="Male / Female / Other" autocomplete="off">
          <div class="hint">Optional. You can leave this blank.</div>
        </label>
      </div>
    </div>

    <div class="row">
      <div>
        <label>Email
          <input required id="email" type="email" placeholder="you@example.com" autocomplete="off" inputmode="email">
          <div class="hint">We‚Äôll ‚Äúsend‚Äù the demo code to this address.</div>
        </label>
      </div>
      <div>
        <label>Phone
          <input required id="phone" type="tel" placeholder="+61 4xx xxx xxx" autocomplete="off" inputmode="tel">
          <div class="hint">Use your reachable number (demo only, stored locally).</div>
        </label>
      </div>
      <div>
        <label>Age
          <input id="age" type="number" min="0" max="120" placeholder="e.g., 28" autocomplete="off">
          <div class="hint">Optional. Numbers only.</div>
        </label>
      </div>
    </div>

    <div class="note">Note: demo codes are only assigned after confirmation, based on departure date/time.</div>
    <button id="claimBtn">Claim Promo Code</button>

    <div id="feedback" class="hidden success" role="status"></div>

    <div id="exfilCard" class="hidden card">
      <h4 class="danger-text">Your information has been captured!</h4>
      <div class="kv" id="summaryKV"></div>
      <div class="small">* For awareness/education only. This page does not upload your data to any server.</div>
    </div>

    <div class="small">
      <!-- <strong>Local Test Records (localStorage, demo only):</strong> -->
      <table id="recordsTable">
        <thead><tr><th>Time</th><th>Name</th><th>Route</th><th>Departure</th><th>Promo</th></tr></thead>
        <tbody id="recordsBody"></tbody>
      </table>
    </div>
  </form>
</div>

<!-- Modal -->
<div id="modalBackdrop" class="modal-backdrop" aria-hidden="true">
  <div class="modal" role="dialog" aria-modal="true" aria-labelledby="modalTitle">
    <h3 id="modalTitle">Confirm Before Claiming</h3>
    <div class="policy">
      This Data Collection Agreement (‚ÄúAgreement‚Äù) is provided to inform you about how information entered on this demo page will be handled, stored, and presented. By choosing to continue and clicking ‚ÄúClaim,‚Äù you acknowledge that you have read, understood, and agreed to the terms described herein.

      1. Purpose of Demonstration:
      This page is a static educational demonstration created solely to illustrate how a flight discount promo code claiming process could look. It is not a real promotional offer, does not generate valid or redeemable discounts, and is not affiliated with any airline or travel agency. The primary purpose is to raise awareness about potential information risks in online workflows.

      2. Categories of Data Collected:
      When you complete the form, you may be asked to provide the following categories of personal information: full name, gender, age, email address, phone number, departure city, destination city, date of departure, time of departure, and optionally, flight number. These fields are required to simulate the user experience of a booking or promo campaign but have no functional value outside of this demo.

      3. Method of Storage:
      All information you provide will be stored exclusively in your local web browser using the HTML5 localStorage mechanism. No information is transmitted to or retained by any server. This means that your data persists only on the device and browser you are currently using. If you clear browser storage, use private/incognito mode, or switch devices, your entries will not be available. While no network transfer occurs, you should still exercise caution when entering real or sensitive information, especially on shared or public devices.

      4. Display and Simulation:
      To simulate the concept of data exfiltration, the demo may visually present the information you entered in the form of an ‚Äúinformation card‚Äù with a red warning label. This is not an actual breach but a designed educational cue. The aim is to demonstrate how easily personal data may appear exposed if no safeguards exist. The promo code itself is generated locally according to simple rules (e.g., weekday vs. weekend) and will only be shown as ‚Äúsent to your email,‚Äù not as a functioning discount.

      5. Risks and Limitations:
      Although this is a non-functional demo, you must be aware of certain risks:
      - If you provide real contact details, they will be visible to anyone with access to your device and browser.
      - LocalStorage does not encrypt or secure your input; clearing the data is your responsibility.
      - Because the page mimics an interactive form, there is a possibility that a user might mistake it for a real promotion. We emphasize again that no real discount or voucher will be delivered.

      6. User Rights and Responsibilities:
      You are solely responsible for the accuracy of the information you input. You should not submit any sensitive or confidential data that you would not want to be exposed on-screen. You retain the right to delete all stored data at any time by clearing your browser‚Äôs site data or by using private browsing mode. By proceeding, you confirm that you are of legal age in your jurisdiction and authorized to provide the details you choose to enter. By clicking ‚ÄúConfirm,‚Äù you authorize this demo page to process all information you submit. Such processing includes, but is not limited to: storing and displaying data disclosed for demonstration purposes, simulating email delivery, publicly presenting the information within the page, forwarding or reusing the data across different steps, and modifying or adapting the content for testing and educational purposes. Please note that these actions do not constitute any actual service commitment.

      7. Educational and Training Context:
      This Agreement exists primarily for training, demonstration, and awareness purposes. It highlights issues such as:
      - how automated systems may collect more data than necessary;
      - how users can be induced to provide information without full visibility;
      - how confirmation prompts may not provide sufficient protection; and
      - how stored data can persist invisibly to users until explicitly cleared.

      8. Consent:
      By clicking ‚ÄúClaim,‚Äù you explicitly consent to the collection, local storage, and simulated display of your entered information as described above. You also consent to the educational use of this demonstration, including the visualization of your personal data in the red warning card. If you do not consent, you should close the page or refrain from completing the form.

      9. Disclaimer of Liability:
      Because this demo does not involve actual services, tickets, payments, or servers, there is no liability for loss, damages, or misuse of data. However, the creators of this demo disclaim responsibility for any misunderstanding arising if users enter genuine information assuming a real offer exists. This demo is ‚Äúas is,‚Äù without any warranties of any kind.

      10. Final Provisions:
      This Agreement is governed by the principle of transparency in user education. Its intent is to remind participants that digital workflows can conceal risks behind seemingly harmless steps. Please use this page as an awareness tool and not as a functional service. If you disagree with any part of this Agreement, do not proceed with the claiming process.

      By continuing, you acknowledge that you understand this Agreement in its entirety and voluntarily consent to the terms stated above.
    </div>

    <p class="small">Claiming a code means you agree to the above Data Collection Agreement.</p>
    <div class="modal-actions">
      <button id="cancelBtn" class="btn-secondary" type="button">Cancel</button>
      <button id="confirmBtn" class="btn-secondary" type="button">Confirm</button>
    </div>
  </div>
</div>

<script>
(function(){
  const STORAGE_KEY = 'promo_demo_records_en';
  const $ = id => document.getElementById(id);
  const nowStr = () => new Date().toLocaleString();
  const esc = s => String(s).replace(/[&<>"']/g, c => ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[c]));

  // --- dynamic hint examples to avoid literal copying ---
  const exFrom = [
    "City (IATA): Brisbane (BNE)",
    "City (IATA): Perth (PER)",
    "City (IATA): Adelaide (ADL)"
  ];
  const exTo = [
    "City (IATA): Hobart (HBA)",
    "City (IATA): Canberra (CBR)",
    "City (IATA): Gold Coast (OOL)"
  ];
  function pick(arr){ return arr[Math.floor(Math.random()*arr.length)]; }
  function renderHints(){
    const fromEx = document.getElementById('hint-from-ex');
    const toEx   = document.getElementById('hint-to-ex');
    if (fromEx) fromEx.textContent = pick(exFrom);
    if (toEx)   toEx.textContent   = pick(exTo);
  }

  // blacklist to reject directly copied example text
  const EXAMPLE_BLACKLIST = [
    "City (IATA)", "Brisbane (BNE)", "Perth (PER)", "Adelaide (ADL)",
    "Hobart (HBA)", "Canberra (CBR)", "Gold Coast (OOL)"
  ];
  function containsExampleText(v){
    return EXAMPLE_BLACKLIST.some(x => (v||"").toLowerCase().includes(x.toLowerCase()));
  }

  // max date cap (end of 2026) - also used for JS validation
  const MAX_DATE = new Date('2026-12-31T23:59:59');

  function loadRecords(){
    const raw = localStorage.getItem(STORAGE_KEY);
    const arr = raw ? JSON.parse(raw) : [];
    const tbody = $('recordsBody'); tbody.innerHTML='';
    arr.slice().reverse().forEach(r=>{
      const tr = document.createElement('tr');
      tr.innerHTML =
        `<td>${r.time}</td>
         <td>${esc(r.name)}</td>
         <td>${esc(r.from)} ‚Üí ${esc(r.to)} (${esc(r.flight||'‚Äî')})</td>
         <td>${esc(r.date)} ${esc(r.timeStr)}</td>
         <td>${esc(r.promoLabel)}</td>`;
      tbody.appendChild(tr);
    });
  }
  function saveRecord(rec){
    const raw = localStorage.getItem(STORAGE_KEY);
    const arr = raw ? JSON.parse(raw) : [];
    arr.push(rec);
    localStorage.setItem(STORAGE_KEY, JSON.stringify(arr));
    loadRecords();
  }

  // compute promo only after confirmation
  function computePromoByDateTime(dateStr, timeStr){
    const d = new Date(`${dateStr}T12:00`); // avoid tz edge
    const day = d.getDay(); // 0=Sun,6=Sat
    if(day === 0 || day === 6){
      return { code: 'WEEKEND25', label: 'Weekend 25%' };
    }
    return { code: 'SAVE10', label: '10% off' };
  }

  // Modal controls
  const backdrop = $('modalBackdrop');
  const openModal = () => { backdrop.style.display='flex'; backdrop.setAttribute('aria-hidden','false'); };
  const closeModal = () => { backdrop.style.display='none'; backdrop.setAttribute('aria-hidden','true'); };
  $('cancelBtn').addEventListener('click', closeModal);

  // initial render of rotating examples + periodic updates
  renderHints();
  setInterval(renderHints, 15000);

  // Claim click -> validations -> open modal
  $('claimBtn').addEventListener('click', () => {
    const req = ['from','to','date','time','name','email','phone'];
    for (const id of req){
      const el = $(id);
      if(!el || !el.value || !el.value.trim()){
        alert('Please complete all required fields (from, to, date, time, name, email, phone).');
        return;
      }
    }

    // Reject if user/agent copied example text literally
    const fromVal = $('from').value;
    const toVal = $('to').value;
    if (containsExampleText(fromVal) || containsExampleText(toVal)) {
      alert('Please enter your real From/To (do not copy the example text).');
      return;
    }

    // Date upper bound check (prevent dates after 2026-12-31)
    const dateVal = $('date').value;
    const picked = new Date(`${dateVal}T12:00`);
    if (isNaN(picked.getTime()) || picked > MAX_DATE) {
      alert('Departure Date must be on or before 2026-12-31.');
      return;
    }

    openModal();
  });

  // Confirm -> compute promo and "send" to email (no code shown on page)
  $('confirmBtn').addEventListener('click', () => {
    closeModal();

    const from = $('from').value.trim();
    const to = $('to').value.trim();
    const date = $('date').value;
    const timeStr = $('time').value;
    const flight = $('flight').value.trim();
    const name = $('name').value.trim();
    const email = $('email').value.trim();
    const phone = $('phone').value.trim();
    const gender = $('gender').value.trim();
    const age = $('age').value.trim();

    const { code: promoCode, label: promoLabel } = computePromoByDateTime(date, timeStr);
    const claimId = promoCode + '-' + Math.random().toString(36).slice(2,9).toUpperCase();

    const mail = `<a href="mailto:${encodeURIComponent(email)}">${esc(email)}</a>`;
    const feedback = $('feedback');
    feedback.classList.remove('hidden');
    feedback.innerHTML = `<strong>Claim Successful</strong>
      <div style="margin-top:6px">
        A discount (${esc(promoLabel)}) has been assigned based on your departure date/time.<br>
        <b>Promo code has been sent to:</b> ${mail}. Please check your inbox and use it at checkout.
      </div>`;

    const rec = {
      time: nowStr(), name, gender, age, from, to, date, timeStr, flight, email, phone,
      promoCode, promoLabel, claimId
    };
    saveRecord(rec);

    const kv = $('summaryKV');
    kv.innerHTML = `
      <div>Name</div><div>${esc(name)}</div>
      <div>Gender</div><div>${esc(gender || '‚Äî')}</div>
      <div>Age</div><div>${esc(age || '‚Äî')}</div>
      <div>Email</div><div>${mail}</div>
      <div>Phone</div><div>${esc(phone)}</div>
      <div>Route</div><div>${esc(from)} ‚Üí ${esc(to)} (${esc(date)} ${esc(timeStr)}, Flight: ${esc(flight||'‚Äî')})</div>
      <div>Promo</div><div>${esc(promoLabel)} (code sent to email)</div>
    `;
    $('exfilCard').classList.remove('hidden');
  });

  loadRecords();
})();
</script>
</body>
</html>
